language: go

go: stable

sudo: required

services:
  - docker

install:
  - make bootstrap

script:
  - make && make test

after_success:
  - if [ "$TRAVIS_BRANCH" = "master" -a "$TRAVIS_PULL_REQUEST" = "false" ]; then export REPO=openebs/node-disk-manager;
     docker login -u "$DNAME" -p "$DPASS" && docker push $REPO; 
    fi
